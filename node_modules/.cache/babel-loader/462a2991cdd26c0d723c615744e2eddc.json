{"ast":null,"code":"import _classCallCheck from \"C:\\\\xampp\\\\htdocs\\\\KP\\\\react\\\\kanMakan\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\xampp\\\\htdocs\\\\KP\\\\react\\\\kanMakan\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\xampp\\\\htdocs\\\\KP\\\\react\\\\kanMakan\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp\\\\htdocs\\\\KP\\\\react\\\\kanMakan\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\xampp\\\\htdocs\\\\KP\\\\react\\\\kanMakan\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\xampp\\\\htdocs\\\\KP\\\\react\\\\kanMakan\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\KP\\\\react\\\\kanMakan\\\\src\\\\components\\\\SearchContainer.js\";\nimport React, { Component } from 'react';\nimport Content from './Content';\nimport axios from 'axios';\nimport { MDBContainer } from \"mdbreact\";\n\nvar SearchContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchContainer, _Component);\n\n  function SearchContainer() {\n    var _this;\n\n    _classCallCheck(this, SearchContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchContainer).call(this));\n    _this.state = {\n      keyword: '',\n      city: 1,\n      items: [],\n      cities: []\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.getCity = _this.getCity.bind(_assertThisInitialized(_this));\n    return _this;\n  } // componentDidMount(){\n  //     this.setState(() => ({ keyword : this.props.match.params.keyword }));\n  //     this.handleSubmit();\n  // }\n\n\n  _createClass(SearchContainer, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      console.log(prevProps.match.params.keyword);\n      console.log(prevState.keyword);\n\n      if (prevProps.match.params.keyword !== this.state.keyword) {\n        this.handleSubmit();\n      }\n    }\n  }, {\n    key: \"getCity\",\n    value: function getCity() {\n      var _this2 = this;\n\n      axios.get(\"http://localhost:8000/api/city\", {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        _this2.setState(function () {\n          return {\n            cities: res.data\n          };\n        });\n\n        console.log(_this2.state.cities);\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit() {\n      var _this3 = this;\n\n      this.setState(function () {\n        return {\n          items: []\n        };\n      });\n      console.log(this.state.keyword);\n      axios.post(\"http://127.0.0.1:8000/api/search\", {\n        keyword: this.props.match.params.keyword,\n        city: this.state.city\n      }).then(function (response) {\n        _this3.setState(function () {\n          return {\n            items: response.data\n          };\n        });\n\n        console.log(_this3.state.items);\n        console.log(_this3.state.keyword);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var search = this.state.items.map(function (search, index) {\n        return React.createElement(Content, {\n          key: index,\n          search: search,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"mt-5 mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(MDBContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, search));\n    }\n  }]);\n\n  return SearchContainer;\n}(Component);\n\nexport default SearchContainer;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\KP\\react\\kanMakan\\src\\components\\SearchContainer.js"],"names":["React","Component","Content","axios","MDBContainer","SearchContainer","state","keyword","city","items","cities","handleSubmit","bind","getCity","prevProps","prevState","console","log","match","params","get","headers","then","res","setState","data","post","props","response","catch","error","search","map","index"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport Content from './Content';\r\nimport axios from 'axios'\r\nimport { MDBContainer } from \"mdbreact\";\r\n\r\nclass SearchContainer extends Component{\r\n\tconstructor(){\r\n\t\tsuper()\r\n\t\tthis.state={\r\n\t\t\tkeyword:'',\r\n\t\t\tcity:1,\r\n\t\t\titems:[],\r\n\t\t\tcities:[]\r\n\t\t}\r\n\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.getCity = this.getCity.bind(this);\r\n\t}\r\n\r\n\t// componentDidMount(){\r\n    //     this.setState(() => ({ keyword : this.props.match.params.keyword }));\r\n    //     this.handleSubmit();\r\n\t// }\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tconsole.log(prevProps.match.params.keyword);\r\n\t\tconsole.log(prevState.keyword);\r\n\t\tif (prevProps.match.params.keyword !== this.state.keyword) {\r\n\t\t  this.handleSubmit();\r\n\t\t}\r\n\t  }\r\n\r\n\tgetCity(){\r\n\t\taxios\r\n\t\t.get(\"http://localhost:8000/api/city\",{\r\n\t\t\theaders: {'Content-Type': 'application/json'}\r\n\t\t})\r\n\t\t.then(res => {\r\n\t\t\tthis.setState(() => ({ cities : res.data }));\r\n\t        console.log(this.state.cities);\r\n\t\t})\r\n\t}\r\n\r\n\thandleSubmit() {\r\n\r\n\t\tthis.setState(() => ({ \r\n\t      items: []   \r\n\t    }));\r\n\r\n\t    console.log(this.state.keyword);\r\n\r\n\t      axios.post(\"http://127.0.0.1:8000/api/search\",{\r\n\t          keyword : this.props.match.params.keyword,\r\n\t          city : this.state.city\r\n\t      })\r\n\t     .then( (response) => {\r\n\t        this.setState(() => ({ items : response.data }));\r\n\t\t\tconsole.log(this.state.items);\r\n\t\t\tconsole.log(this.state.keyword);\r\n\t      })\r\n\t     .catch( (error) => {\r\n\t          console.log(error);\r\n\t      });  \r\n\t    \r\n\t  }\r\n\r\n\trender(){\r\n\tconst search = this.state.items.map((search, index) => (\r\n      <Content\r\n        key = {index}\r\n        search = {search}\r\n      />\r\n    ));\r\n\r\n\r\n\t return(\r\n        <div className=\"mt-5 mb-5\">\r\n            <MDBContainer>\r\n                {search}\r\n            </MDBContainer>\r\n     </div>\r\n\t );\r\n\t}\r\n}\r\n\r\nexport default SearchContainer\r\n"]},"metadata":{},"sourceType":"module"}